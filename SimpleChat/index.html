<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ÂæÆ‰ø°ÁïåÈù¢</title>
    <!-- ÂºïÂÖ•Vue.js -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <!-- ÂºïÂÖ•Ê†∑ÂºèÊñá‰ª∂ -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <div class="wechat-container">
            <!-- ‰∏ªÈ°µÈù¢ -->
            <div class="page main-page" :class="{ 'slide-out': showChat }">
                <!-- È°∂ÈÉ®Áä∂ÊÄÅÊ†è -->
                <div class="header">
                    <div class="title">{{ getCurrentTabName }}</div>
                    <div class="icons">
                        <i class="icon-search"></i>
                        <i class="icon-add"></i>
                    </div>
                </div>

                <!-- ËÅäÂ§©ÂàóË°®È°µÈù¢ -->
                <div v-if="currentTab === 'wechat'" class="chat-list">
                    <div class="chat-item" 
                        v-for="chat in chats" 
                        :key="chat.id"
                        @click="openChat(chat)"
                    >
                        <div class="avatar">
                            <img :src="chat.avatar" alt="Â§¥ÂÉè">
                        </div>
                        <div class="content">
                            <div class="name">{{chat.name}}</div>
                            <div class="message">{{chat.lastMessage}}</div>
                        </div>
                        <div class="time">{{chat.time}}</div>
                        <div v-if="chat.unread" 
                             class="badge"
                             :class="{ 'large': chat.unread > 99 }"
                        >
                            {{ chat.unread > 99 ? '99+' : chat.unread }}
                        </div>
                    </div>
                </div>

                <!-- ÈÄöËÆØÂΩïÈ°µÈù¢ -->
                <div v-if="currentTab === 'contacts'" class="contacts-page">
                    <!-- ÊêúÁ¥¢Ê°ÜÂÆπÂô® -->
                    <div class="search-container">
                        <div class="search-box">
                            <i class="icon-search"></i>
                            <input 
                                type="text" 
                                v-model="searchText" 
                                placeholder="ÊêúÁ¥¢"
                                @input="handleSearch"
                            >
                        </div>
                    </div>
                    
                    <!-- Ê∑ªÂä†ÊêúÁ¥¢ÁªìÊûúÊòæÁ§∫Âå∫Âüü -->
                    <div class="search-results" v-if="searchText && searchResults.length">
                        <div class="contact-item" 
                            v-for="contact in searchResults" 
                            :key="contact.id"
                            @click="openContactDetail(contact)"
                        >
                            <div class="avatar">
                                <img :src="contact.avatar" alt="Â§¥ÂÉè">
                            </div>
                            <div class="name">{{contact.name}}</div>
                        </div>
                    </div>

                    <!-- ÂéüËÅîÁ≥ª‰∫∫ÂàóË°®ÔºåÂΩìÊ≤°ÊúâÊêúÁ¥¢ÊñáÊú¨Êó∂ÊòæÁ§∫ -->
                    <div class="contact-list" v-show="!searchText">
                        <!-- ÁâπÊÆäËÅîÁ≥ª‰∫∫ -->
                        <div class="special-contacts">
                            <div class="contact-item">
                                <div class="avatar special-avatar green-bg">
                                    <img src="https://api.iconify.design/material-symbols:person-add.svg?color=white&width=15" alt="Êñ∞ÁöÑÊúãÂèã" class="icon-new-friend">
                                </div>
                                <div class="name">Êñ∞ÁöÑÊúãÂèã</div>
                            </div>
                            <div class="contact-item">
                                <div class="avatar special-avatar green-bg">
                                    <img src="https://api.iconify.design/material-symbols:group.svg?color=white&width=18" alt="Áæ§ËÅä" class="icon-group">
                                </div>
                                <div class="name">Áæ§ËÅä</div>
                            </div>
                            <div class="contact-item">
                                <div class="avatar special-avatar green-bg">
                                    <img src="https://api.iconify.design/material-symbols:sell.svg?color=white&width=14" alt="Ê†áÁ≠æ" class="icon-tag">
                                </div>
                                <div class="name">Ê†áÁ≠æ</div>
                            </div>
                            <div class="contact-item">
                                <div class="avatar special-avatar green-bg">
                                    <img src="https://api.iconify.design/material-symbols:chrome-reader-mode.svg?color=white&width=16" alt="ÂÖ¨‰ºóÂè∑" class="icon-official">
                                </div>
                                <div class="name">ÂÖ¨‰ºóÂè∑</div>
                            </div>
                        </div>

                        <!-- ËÅîÁ≥ª‰∫∫ÂàóË°® -->
                        <div class="contact-section" 
                            v-for="section in contactSections" 
                            :key="section.letter"
                            :data-letter="section.letter"
                        >
                            <div class="section-title">{{section.letter}}</div>
                            <div class="contact-item" 
                                v-for="contact in section.contacts" 
                                :key="contact.id"
                                @click="openContactDetail(contact)"
                            >
                                <div class="avatar">
                                    <img :src="contact.avatar" alt="Â§¥ÂÉè">
                                </div>
                                <div class="name">{{contact.name}}</div>
                            </div>
                        </div>
                    </div>

                    <!-- Â≠óÊØçÁ¥¢Âºï -->
                    <div class="letter-index">
                        <span v-for="letter in letters" 
                            :key="letter"
                            @click="scrollToLetter(letter)"
                            @touchstart="handleLetterTouchStart($event, letter)"
                            @touchmove.prevent
                        >{{letter}}</span>
                    </div>
                </div>

                <!-- ÂèëÁé∞È°µÈù¢ -->
                <div v-if="currentTab === 'discover'" class="discover-page">
                    <div class="discover-list">
                        <!-- ÊúãÂèãÂúàÂíåËßÜÈ¢ëÂè∑ -->
                        <div class="discover-section">
                            <div class="discover-item" @click="openMoments">
                                <img src="https://api.iconify.design/material-symbols:camera.svg?color=%23FF9C0B" alt="ÊúãÂèãÂúà" class="discover-icon">
                                <span>ÊúãÂèãÂúà</span>
                                <i class="icon-arrow"></i>
                            </div>
                            <div class="discover-item">
                                <img src="https://api.iconify.design/material-symbols:play-circle.svg?color=%23FA9D3B" alt="ËßÜÈ¢ëÂè∑" class="discover-icon">
                                <span>ËßÜÈ¢ëÂè∑</span>
                                <i class="icon-arrow"></i>
                            </div>
                        </div>

                        <!-- AIÂàõ‰ΩúËÉΩÂäõÂÖ•Âè£ -->
                        <div class="discover-section">
                            <div class="discover-item">
                                <img src="https://api.iconify.design/material-symbols:brush.svg?color=%23FF6B6B" alt="Áîª‰∏ÄÁîª" class="discover-icon">
                                <span>Áîª‰∏ÄÁîª</span>
                                <i class="icon-arrow"></i>
                            </div>
                            <div class="discover-item">
                                <img src="https://api.iconify.design/material-symbols:edit-note.svg?color=%234A90E2" alt="ÂÜô‰∏ÄÂÜô" class="discover-icon">
                                <span>ÂÜô‰∏ÄÂÜô</span>
                                <i class="icon-arrow"></i>
                            </div>
                            <div class="discover-item">
                                <img src="https://api.iconify.design/material-symbols:music-note.svg?color=%23FFB900" alt="Âî±‰∏ÄÂî±" class="discover-icon">
                                <span>Âî±‰∏ÄÂî±</span>
                                <i class="icon-arrow"></i>
                            </div>
                            <div class="discover-item">
                                <img src="https://api.iconify.design/material-symbols:fiber-smart-record.svg?color=%23B066FF" alt="ÂΩï‰∏ÄÂΩï" class="discover-icon">
                                <span>ÂΩï‰∏ÄÂΩï</span>
                                <i class="icon-arrow"></i>
                            </div>
                        </div>

                        <!-- Êâ´‰∏ÄÊâ´ÂíåÊëá‰∏ÄÊëáÈÉ®ÂàÜ -->
                        <div class="discover-section">
                            <div class="discover-item">
                                <img src="https://api.iconify.design/material-symbols:qr-code-scanner.svg?color=%2307C160" alt="Êâ´‰∏ÄÊâ´" class="discover-icon">
                                <span>Êâ´‰∏ÄÊâ´</span>
                                <i class="icon-arrow"></i>
                            </div>
                            <div class="discover-item">
                                <img src="https://api.iconify.design/material-symbols:vibration.svg?color=%2307C160" alt="Êëá‰∏ÄÊëá" class="discover-icon">
                                <span>Êëá‰∏ÄÊëá</span>
                                <i class="icon-arrow"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÊàëÁöÑÈ°µÈù¢ -->
                <div v-if="currentTab === 'me'" class="me-page">
                    <div class="user-info">
                        <div class="avatar">
                            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=User" alt="Â§¥ÂÉè">
                        </div>
                        <div class="info">
                            <div class="name">Áî®Êà∑Âêç</div>
                            <div class="wxid">ÂæÆ‰ø°Âè∑Ôºöwxid_xxx</div>
                        </div>
                        <div class="qr-code">
                            <i class="icon-qr"></i>
                        </div>
                        <i class="icon-arrow"></i>
                    </div>
                    <div class="me-section">
                        <div class="me-item">
                            <i class="icon-pay"></i>
                            <span>ÊîØ‰ªò</span>
                            <i class="icon-arrow"></i>
                        </div>
                    </div>
                    <div class="me-section">
                        <div class="me-item">
                            <i class="icon-favorites"></i>
                            <span>Êî∂Ëóè</span>
                            <i class="icon-arrow"></i>
                        </div>
                        <div class="me-item">
                            <i class="icon-albums"></i>
                            <span>Áõ∏ÂÜå</span>
                            <i class="icon-arrow"></i>
                        </div>
                        <div class="me-item">
                            <i class="icon-cards"></i>
                            <span>Âç°ÂåÖ</span>
                            <i class="icon-arrow"></i>
                        </div>
                        <div class="me-item">
                            <i class="icon-sticker"></i>
                            <span>Ë°®ÊÉÖ</span>
                            <i class="icon-arrow"></i>
                        </div>
                    </div>
                    <div class="me-section">
                        <div class="me-item">
                            <i class="icon-settings"></i>
                            <span>ËÆæÁΩÆ</span>
                            <i class="icon-arrow"></i>
                        </div>
                    </div>
                </div>

                <!-- Â∫ïÈÉ®ÂØºËà™Ê†è -->
                <div class="tab-bar">
                    <div 
                        v-for="tab in tabs" 
                        :key="tab.id"
                        class="tab-item"
                        :class="{ 'active': currentTab === tab.id }"
                        @click="switchTab(tab.id)"
                    >
                        <i :class="tab.icon"></i>
                        <span>{{ tab.name }}</span>
                        <span v-if="tab.unread" class="badge">{{ tab.unread }}</span>
                        <span v-if="tab.hasNew" class="dot"></span>
                    </div>
                </div>
            </div>

            <!-- ËÅäÂ§©ËØ¶ÊÉÖÈ°µÈù¢ -->
            <div class="page chat-page" :class="{ 'slide-in': showChat }">
                <div class="header">
                    <div class="back-button" @click="goBack">
                        <!-- ÁßªÈô§ÂõæÊ†áÂ≠ó‰ΩìÔºå‰ΩøÁî® CSS ÁªòÂà∂ÁöÑÁÆ≠Â§¥ -->
                    </div>
                    <div class="title">{{ currentChat?.name }}</div>
                    <div class="icons">
                        <i class="icon-more"></i>
                    </div>
                </div>
                <div class="chat-content">
                    <div class="chat-messages" v-if="currentChat && currentChat.messages && currentChat.messages.length">
                        <div 
                            v-for="msg in currentChat.messages" 
                            :key="msg.id"
                            class="message-item"
                            :class="{ 'self': msg.isSelf }"
                        >
                            <img 
                                v-if="msg.type === 'image'" 
                                :src="msg.content" 
                                class="message-image"
                                @click="previewImage(msg.content)"
                            >
                            <span v-else>{{ msg.content }}</span>
                        </div>
                    </div>
                    <div v-else class="message-hint">ÊöÇÊó†ËÅäÂ§©ËÆ∞ÂΩï</div>
                </div>

                <!-- ‰øÆÊîπËÅäÂ§©ËæìÂÖ•Ê°ÜÂå∫Âüü -->
                <div class="chat-input-area">
                    <div class="input-toolbar">
                        <i class="icon-voice"></i>
                    </div>
                    <div class="input-box">
                        <input 
                            type="text" 
                            v-model="messageText" 
                            placeholder="ËæìÔøΩÔøΩÔøΩÊ∂à..."
                            @keyup.enter="sendMessage"
                        >
                        <div class="image-preview-container" v-if="selectedImages.length">
                            <div class="image-preview" v-for="(image, index) in selectedImages" :key="index">
                                <img :src="image" alt="È¢ÑËßàÂõæÁâá">
                                <span class="icon-close" @click="cancelImage(index)"></span>
                            </div>
                        </div>
                    </div>
                    <label class="upload-btn">
                        <img src="https://cdn-icons-png.flaticon.com/512/2983/2983788.png" alt="ÂõæÁâá" class="icon-image">
                        <input 
                            type="file" 
                            accept="image/*" 
                            @change="handleImageSelect" 
                            multiple
                            style="display: none;"
                        >
                    </label>
                    <button 
                        class="send-btn"
                        :class="{ active: messageText.trim() || selectedImages.length }"
                        @click="sendMessage"
                    >ÂèëÈÄÅ</button>
                </div>
            </div>

            <!-- ËÅî‰∫∫ËØ¶ÊÉÖÈ°µÈù¢ -->
            <div class="page contact-detail-page" :class="{ 'slide-in': showContactDetail }">
                <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
                <div class="header">
                    <div class="back-button" @click="closeContactDetail">
                        <span class="back-arrow"></span>
                    </div>
                    <div class="title">ËØ¶ÁªÜËµÑÊñô</div>
                </div>
                
                <!-- ‰∏™‰∫∫‰ø°ÊÅØÂç°Áâá -->
                <div class="contact-detail-content">
                    <div class="info-card">
                        <div class="avatar-large">
                            <img :src="currentContact?.avatar" alt="Â§¥ÂÉè">
                        </div>
                        <div class="info-main">
                            <div class="name">{{ currentContact?.name }}</div>
                            <div class="wxid">ÂæÆ‰ø°Âè∑Ôºö{{ currentContact?.wxid || 'wxid_' + currentContact?.name }}</div>
                        </div>
                    </div>

                    <!-- ËØ¶ÁªÜ‰ø°ÊÅØÂàóË°® -->
                    <div class="detail-list">
                        <div class="detail-item">
                            <span class="label">Â§áÊ≥®</span>
                            <span class="value">{{ currentContact?.remark || 'ËÆæÁΩÆÂ§áÊ≥®' }}</span>
                            <i class="icon-arrow"></i>
                        </div>
                        <div class="detail-item">
                            <span class="label">Âú∞Âå∫</span>
                            <span class="value">{{ currentContact?.region || 'Êú™ËÆæÁΩÆ' }}</span>
                        </div>
                    </div>
                </div>

                <!-- Â∫ïÈÉ®Êìç‰ΩúÈíÆ -->
                <div class="bottom-actions">
                    <div class="action-buttons">
                        <div class="action-btn" @click="startChat(currentContact)">
                            <div class="icon-wrapper">
                                <i class="icon-message"></i>
                            </div>
                            <span>ÂèëÊ∂àÊÅØ</span>
                        </div>
                        <div class="action-btn">
                            <div class="icon-wrapper">
                                <i class="icon-video"></i>
                            </div>
                            <span>ËßÜÈ¢ëÈÄöËØù</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÊúãÂèãÂúàÈ°µÈù¢ -->
            <div class="page moments-page" :class="{ 'slide-in': showMoments }">
                <!-- ÂØºËà™Ê†è -->
                <div class="moments-nav" :class="{ 'scrolled': isNavScrolled }">
                    <div class="back-button" @click="closeMoments">
                        <i class="icon-back"></i>
                    </div>
                    <div class="title">ÊúãÂèãÂúà</div>
                    <img src="https://api.iconify.design/material-symbols:photo-camera-outline.svg" 
                         class="icon-camera" 
                         @click="openCamera">
                </div>

                <!-- ÊúãÂèãÂúàÂÜÖÂÆπÂå∫Âüü -->
                <div class="moments-content" @scroll="handleMomentsScroll">
                    <!-- È°∂ÈÉ®ËÉåÊôØÂå∫Âüü -->
                    <div class="moments-header">
                        <img class="moments-bg" src="https://picsum.photos/800/600" alt="ÊúãÂèãÂúàËÉåÊôØ">
                        <div class="user-info-moments">
                            <div class="user-name-moments">ÊàëÁöÑÂêçÂ≠ó</div>
                            <img class="user-avatar-moments" 
                                 src="https://api.dicebear.com/7.x/avataaars/svg?seed=User" 
                                 alt="Â§¥ÂÉè">
                        </div>
                    </div>

                    <!-- ÊúãÂèãÂúàÂàóË°® -->
                    <div class="moments-list">
                        <div v-for="moment in moments" 
                             :key="moment.id" 
                             class="moment-item">
                            <div class="moment-header">
                                <img :src="moment.avatar" :alt="moment.name" class="moment-avatar">
                                <div class="moment-info">
                                    <div class="moment-name">{{ moment.name }}</div>
                                    <div class="moment-text">{{ moment.text }}</div>
                                    <div class="moment-images" v-if="moment.images && moment.images.length">
                                        <img v-for="(image, index) in moment.images" 
                                             :key="index"
                                             :src="image"
                                             class="moment-image"
                                             @click="previewImage(moment.images, index)">
                                    </div>
                                    <div class="moment-footer">
                                        <span class="moment-time">{{ moment.time }}</span>
                                        <div class="moment-actions">
                                            <span class="moment-action">Ëµû</span>
                                            <span class="moment-action">ËØÑËÆ∫</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÂºïÂÖ•ÂõæÊ†áÂ≠ó‰ΩìÔºàËøôÈáå‰ΩøÁî®Á§∫‰æãÈìæÊé•ÔºåÈúÄË¶ÅÊõøÊç¢ÊàêÂÆûÈôÖÁöÑÂõæÊ†áÂ∫ìÔºâ -->
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_8d5l8fzk5b87iudi.css">
    
    <!-- VueÂÆû‰æãÈÖçÁΩÆ -->
    <script>
        const { createApp } = Vue;

        const app = createApp({
            data() {
                return {
                    currentTab: 'wechat',
                    tabs: [
                        { id: 'wechat', name: 'ÂæÆ‰ø°', icon: 'icon-chat' },
                        { id: 'contacts', name: 'ÈÄöËÆØÂΩï', icon: 'icon-contacts' },
                        { id: 'discover', name: 'ÂèëÁé∞', icon: 'icon-discover' },
                        { id: 'me', name: 'Êàë', icon: 'icon-me' }
                    ],
                    messageText: '',
                    selectedImages: [],
                    imageFiles: [],
                    chats: [
                        {
                            id: 1,
                            name: 'ÂæÆ‰ø°Âõ¢Èòü',
                            avatar: 'https://api.dicebear.com/7.x/bottts/svg?seed=wx-team',
                            lastMessage: 'Ê¨¢Ëøé‰ΩøÁî®ÂæÆ‰ø°',
                            time: '12:00',
                            unread: 1,
                            isOfficial: true,
                            messages: [
                                {
                                    id: 1,
                                    type: 'text',
                                    content: 'Ê¨¢Ëøé‰ΩøÁî®ÂæÆ‰ø°',
                                    isSelf: false,
                                    time: '12:00'
                                }
                            ]
                        },
                        {
                            id: 2,
                            name: 'Êñá‰ª∂‰º†ËæìÂä©Êâã',
                            avatar: 'https://api.dicebear.com/7.x/bottts/svg?seed=file-helper',
                            lastMessage: 'ÊÇ®ÁöÑÊñá‰ª∂Â∑≤ÂèëÈÄÅÊàêÂäü',
                            time: '11:30',
                            unread: 0,
                            isSystem: true,
                            messages: [
                                {
                                    id: 1,
                                    type: 'text',
                                    content: 'ÊÇ®ÁöÑÊñá‰ª∂Â∑≤ÂèëÈÄÅÊàêÂäü',
                                    isSelf: false,
                                    time: '11:30'
                                }
                            ]
                        },
                        {
                            id: 3,
                            name: '‰∫ßÂìÅÂºÄÂèëÁæ§',
                            avatar: 'https://api.dicebear.com/7.x/initials/svg?seed=‰∫ßÂìÅÂºÄÂèëÁæ§',
                            lastMessage: 'Alice: Êñ∞ÂäüËÉΩÂ∑≤Áªè‰∏äÁ∫ø‰∫ÜÔºåÂ§ßÂÆ∂ÂèØ‰ª•Êµã‰∏Ä‰∏ã',
                            time: '10:45',
                            unread: 12,
                            isGroup: true,
                            messages: [
                                {
                                    id: 1,
                                    type: 'text',
                                    content: 'Êñ∞ÂäüËÉΩÂ∑≤Áªè‰∏äÁ∫ø‰∫ÜÔºåÂ§ßÂÆ∂ÂèØ‰ª•ÊµãËØï‰∏Ä‰∏ã',
                                    isSelf: false,
                                    time: '10:45',
                                    sender: 'Alice'
                                }
                            ]
                        },
                        {
                            id: 4,
                            name: 'Alice',
                            avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Alice',
                            lastMessage: 'Â•ΩÁöÑÔºå‰∏ãÂçàËßÅ',
                            time: '10:30',
                            unread: 0,
                            messages: [
                                {
                                    id: 1,
                                    type: 'text',
                                    content: '‰∏ãÂçàÊúâ‰∏™‰ºöËÆÆÈúÄË¶ÅËÆ®ËÆ∫',
                                    isSelf: false,
                                    time: '10:25'
                                },
                                {
                                    id: 2,
                                    type: 'text',
                                    content: 'Â•ΩÁöÑÔºå‰∏ãÂçàËßÅ',
                                    isSelf: true,
                                    time: '10:30'
                                }
                            ]
                        },
                        {
                            id: 5,
                            name: 'Bob',
                            avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Bob',
                            lastMessage: 'È°πÁõÆËøõÂ±ïÂ¶Ç‰ΩïÔºü',
                            time: '09:15',
                            unread: 3,
                            messages: [
                                {
                                    id: 1,
                                    type: 'text',
                                    content: 'È°πÁõÆËøõÂ±ïÂ¶Ç‰ΩïÔºü',
                                    isSelf: false,
                                    time: '09:15'
                                }
                            ]
                        },
                        {
                            id: 6,
                            name: 'ÊäÄÊúØÊîØÊåÅÁæ§',
                            avatar: 'https://api.dicebear.com/7.x/initials/svg?seed=ÊäÄÊúØÊîØÊåÅÁæ§',
                            lastMessage: 'Tom: ÊúçÂä°Âô®Áä∂ÊÄÅÂ∑≤ÊÅ¢Â§çÊ≠£Â∏∏',
                            time: '09:00',
                            unread: 5,
                            isGroup: true,
                            messages: [
                                {
                                    id: 1,
                                    type: 'text',
                                    content: 'ÊúçÂä°Áä∂ÊÄÅÂ∑≤ÊÅ¢Â§çÂ∏∏',
                                    isSelf: false,
                                    time: '09:00',
                                    sender: 'Tom'
                                }
                            ]
                        },
                        {
                            id: 7,
                            name: 'Emma',
                            avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Emma',
                            lastMessage: 'Âë®Êú´‰∏ÄËµ∑ÂéªÁúãÁîµÂΩ±ÂêóÔºü',
                            time: 'Êò®Â§©',
                            unread: 1,
                            messages: [
                                {
                                    id: 1,
                                    type: 'text',
                                    content: 'Âë®Êú´‰∏ÄËµ∑ÂéªÁúãÁîµÂΩ±ÂêóÔºü',
                                    isSelf: false,
                                    time: 'Êò®Â§©'
                                }
                            ]
                        },
                        {
                            id: 8,
                            name: 'ÂÆ∂Â∫≠Áæ§',
                            avatar: 'https://api.dicebear.com/7.x/initials/svg?seed=ÂÆ∂Â∫≠Áæ§',
                            lastMessage: 'Â¶àÂ¶àÔºöËÆ∞ÂæóÂõûÂÆ∂ÂêÉÈ•≠',
                            time: 'Êò®Â§©',
                            unread: 0,
                            isGroup: true,
                            messages: [
                                {
                                    id: 1,
                                    type: 'text',
                                    content: 'ËÆ∞ÂæóÂõûÂÆ∂ÂêÉÈ•≠',
                                    isSelf: false,
                                    time: 'Êò®Â§©',
                                    sender: 'Â¶àÂ¶à'
                                }
                            ]
                        },
                        {
                            id: 9,
                            name: 'Jack',
                            avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Jack',
                            lastMessage: 'È°πÁõÆÊñáÊ°£Â∑≤Êõ¥Êñ∞',
                            time: 'ÊòüÊúü‰∫å',
                            unread: 0,
                            messages: [
                                {
                                    id: 1,
                                    type: 'text',
                                    content: 'È°πÁõÆÊñáÊ°£Â∑≤Êõ¥Êñ∞',
                                    isSelf: false,
                                    time: 'ÊòüÊúü‰∫å'
                                }
                            ]
                        },
                        {
                            id: 10,
                            name: 'ÂêåÂ≠¶‰ºöÁæ§',
                            avatar: 'https://api.dicebear.com/7.x/initials/svg?seed=ÂêåÂ≠¶‰ºöÁæ§',
                            lastMessage: 'Lisa: ‰∏ã‰∏™ÊúàËÅö‰ºöÊó∂Èó¥ÂÆö‰∫ÜÂêóÔºü',
                            time: 'ÊòüÊúü‰∏Ä',
                            unread: 8,
                            isGroup: true,
                            messages: [
                                {
                                    id: 1,
                                    type: 'text',
                                    content: '‰∏ã‰∏™ÊúàËÅö‰ºöÊó∂Èó¥ÂÆö‰∫ÜÂêóÔºü',
                                    isSelf: false,
                                    time: 'ÊòüÊúü‰∏Ä',
                                    sender: 'Lisa'
                                }
                            ]
                        }
                    ],
                    showChat: false,
                    currentChat: null,
                    showContactDetail: false,
                    currentContact: null,
                    letters: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'],
                    contactSections: [
                        {
                            letter: 'A',
                            contacts: [
                                {
                                    id: 1,
                                    name: 'Alice',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Alice',
                                    region: 'Âπø‰∏ú Ê∑±Âú≥'
                                },
                                {
                                    id: 2,
                                    name: 'Amy',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Amy',
                                    region: 'Âåó‰∫¨'
                                },
                                {
                                    id: 3,
                                    name: 'Alex',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Alex',
                                    region: '‰∏äÊµ∑'
                                }
                            ]
                        },
                        {
                            letter: 'B',
                            contacts: [
                                {
                                    id: 4,
                                    name: 'Bob',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Bob',
                                    region: '‰∏äÊµ∑'
                                },
                                {
                                    id: 5,
                                    name: 'Bill',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Bill',
                                    region: 'Âπø‰∏ú ÂπøÂ∑û'
                                },
                                {
                                    id: 6,
                                    name: 'Bruce',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Bruce',
                                    region: 'ÊµôÊ±ü Êù≠Â∑û'
                                }
                            ]
                        },
                        {
                            letter: 'C',
                            contacts: [
                                {
                                    id: 7,
                                    name: 'Cindy',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Cindy',
                                    region: 'ÊµôÊ±ü Êù≠Â∑û'
                                },
                                {
                                    id: 8,
                                    name: 'Chris',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Chris',
                                    region: 'Ê±üËãè Âçó‰∫¨'
                                }
                            ]
                        },
                        {
                            letter: 'D',
                            contacts: [
                                {
                                    id: 9,
                                    name: 'David',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=David',
                                    region: 'ÂõõÂ∑ù ÊàêÈÉΩ'
                                },
                                {
                                    id: 10,
                                    name: 'Daniel',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Daniel',
                                    region: 'ÊπñÂåó Ê≠¶Ê±â'
                                }
                            ]
                        },
                        {
                            letter: 'L',
                            contacts: [
                                {
                                    id: 11,
                                    name: 'Lucy',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Lucy',
                                    region: 'Á¶èÂª∫ Âé¶Èó®'
                                },
                                {
                                    id: 12,
                                    name: 'Linda',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Linda',
                                    region: 'Â±±‰∏ú ÈùíÂ≤õ'
                                }
                            ]
                        },
                        {
                            letter: 'M',
                            contacts: [
                                {
                                    id: 13,
                                    name: 'Mike',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Mike',
                                    region: 'Ê±üË•ø ÂçóÊòå'
                                },
                                {
                                    id: 14,
                                    name: 'Mary',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Mary',
                                    region: 'ÂÆâÂæΩ ÂêàËÇ•'
                                }
                            ]
                        },
                        {
                            letter: 'S',
                            contacts: [
                                {
                                    id: 15,
                                    name: 'Sarah',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah',
                                    region: 'ÈáçÂ∫Ü'
                                },
                                {
                                    id: 16,
                                    name: 'Steve',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Steve',
                                    region: 'Â§©Ê¥•'
                                }
                            ]
                        },
                        {
                            letter: 'W',
                            contacts: [
                                {
                                    id: 17,
                                    name: 'William',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=William',
                                    region: 'Ê≤≥Âåó Áü≥ÂÆ∂Â∫Ñ'
                                },
                                {
                                    id: 18,
                                    name: 'Wendy',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Wendy',
                                    region: 'Ë•ø Ë•øÂÆâ'
                                }
                            ]
                        },
                        {
                            letter: 'Z',
                            contacts: [
                                {
                                    id: 19,
                                    name: 'Zack',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Zack',
                                    region: 'ÊπñÂçó ÈïøÊ≤ô'
                                },
                                {
                                    id: 20,
                                    name: 'Zoey',
                                    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Zoey',
                                    region: '‰∫ëÂçó ÊòÜÊòé'
                                }
                            ]
                        }
                    ],
                    searchText: '', // ÊêúÁ¥¢ÊñáÊú¨
                    searchResults: [], // ÊêúÁ¥¢ÁªìÊûú
                    showMoments: false,
                    isNavScrolled: false,
                    moments: [
                        {
                            id: 1,
                            name: "Âº†‰∏â",
                            avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Alice",
                            text: "‰ªäÂ§©Â§©Ê∞îÁúüÂ•Ω ‚òÄÔ∏è",
                            images: [
                                "https://picsum.photos/300/300?random=1",
                                "https://picsum.photos/300/300?random=2",
                                "https://picsum.photos/300/300?random=3"
                            ],
                            time: "5ÂàÜÈíüÂâç"
                        },
                        {
                            id: 2,
                            name: "ÊùéÂõõ",
                            avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Bob",
                            text: "ÂàÜ‰∫´‰∏Ä‰∏™ÊúâË∂£ÁöÑÈ°πÁõÆ üöÄ",
                            images: [
                                "https://picsum.photos/300/300?random=4"
                            ],
                            time: "10ÂàÜÈíüÂâç"
                        },
                        {
                            id: 3,
                            name: "Â∞èÊòé",
                            avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Charlie",
                            text: "Âë®Êú´ÂéªÁà¨Â±±ÔºåÈ£éÊôØÁúüÁæé üèîÔ∏è",
                            images: [
                                "https://picsum.photos/300/300?random=5",
                                "https://picsum.photos/300/300?random=6",
                                "https://picsum.photos/300/300?random=7",
                                "https://picsum.photos/300/300?random=8"
                            ],
                            time: "1Â∞èÊó∂Ââç"
                        },
                        {
                            id: 4,
                            name: "Â∞èÁ∫¢",
                            avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=David",
                            text: "Êñ∞‰π∞ÁöÑÁõ∏Êú∫ÔºåÈöèÊâãÊãçÂá†Âº† üì∏",
                            images: [
                                "https://picsum.photos/300/300?random=9",
                                "https://picsum.photos/300/300?random=10"
                            ],
                            time: "2Â∞èÊó∂Ââç"
                        },
                        {
                            id: 5,
                            name: "Áéã‰∫î",
                            avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Eva",
                            text: "ÁæéÈ£üÂàÜ‰∫´ üçú",
                            images: [
                                "https://picsum.photos/300/300?random=11",
                                "https://picsum.photos/300/300?random=12",
                                "https://picsum.photos/300/300?random=13",
                                "https://picsum.photos/300/300?random=14",
                                "https://picsum.photos/300/300?random=15"
                            ],
                            time: "3Â∞èÊó∂Ââç"
                        },
                        {
                            id: 6,
                            name: "Â∞èÊùé",
                            avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Frank",
                            text: "Â∑•‰ΩúÊó•Â∏∏ üíº",
                            time: "4Â∞èÊó∂Ââç"
                        },
                        {
                            id: 7,
                            name: "Â∞èÂº†",
                            avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=George",
                            text: "Êñ∞Âà∞ÁöÑÂíñÂï°Ë±ÜÔºåÈ¶ôÊ∞îÂõõÊ∫¢ ‚òïÔ∏è",
                            images: [
                                "https://picsum.photos/300/300?random=16"
                            ],
                            time: "5Â∞èÊó∂Ââç"
                        },
                        {
                            id: 8,
                            name: "Â∞èÁéã",
                            avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Henry",
                            text: "ËØª‰π¶ÊâìÂç°Á¨¨100Â§© üìö",
                            time: "6Â∞èÊó∂Ââç"
                        },
                        {
                            id: 9,
                            name: "Â∞èÈôà",
                            avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Ivy",
                            text: "ÁúãÂ±ïËßàÁöÑ‰∏ÄÂ§© üé®",
                            images: [
                                "https://picsum.photos/300/300?random=17",
                                "https://picsum.photos/300/300?random=18",
                                "https://picsum.photos/300/300?random=19"
                            ],
                            time: "8Â∞èÊó∂Ââç"
                        },
                        {
                            id: 10,
                            name: "Â∞èÊûó",
                            avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Jack",
                            text: "Êñ∞Â≠¶ÊúüÂºÄÂßã‰∫Ü üìù",
                            images: [
                                "https://picsum.photos/300/300?random=20",
                                "https://picsum.photos/300/300?random=21"
                            ],
                            time: "10Â∞èÊó∂Ââç"
                        }
                    ]
                }
            },
            methods: {
                switchTab(tabId) {
                    this.currentTab = tabId;
                },
                openChat(chat) {
                    this.currentChat = chat;
                    this.showChat = true;
                    
                    // Ê∏ÖÈô§Êú™ËØªÊ∂àÊÅØÊèêÈÜí
                    if (chat.unread) {
                        chat.unread = 0;  // Â∞ÜÊú™ËØªÊ∂àÊÅØÊï∞ÈáçÁΩÆ‰∏∫0
                    }
                    
                    // ÊªöÂä®Âà∞Â∫ïÈÉ®
                    this.$nextTick(() => {
                        const chatContent = document.querySelector('.chat-content');
                        if (chatContent) {
                            chatContent.scrollTop = chatContent.scrollHeight;
                        }
                    });
                },
                goBack() {
                    // ÂÖ≥Èó≠ËÅäÂ§©È°µÈù¢
                    this.showChat = false;
                    this.currentChat = null;
                    // Áõ¥Êé•ÂàáÊç¢Âà∞ÂæÆ‰ø°Ê†áÁ≠æÈ°µ
                    this.currentTab = 'wechat';
                },
                handleImageSelect(event) {
                    const files = Array.from(event.target.files);
                    files.forEach(file => {
                        if (file) {
                            this.imageFiles.push(file);
                            const reader = new FileReader();
                            reader.onload = (e) => {
                                this.selectedImages.push(e.target.result);
                            };
                            reader.readAsDataURL(file);
                        }
                    });
                    event.target.value = '';
                },
                cancelImage(index) {
                    this.selectedImages.splice(index, 1);
                    this.imageFiles.splice(index, 1);
                },
                sendMessage() {
                    if (!this.currentChat) {
                        console.warn('No current chat selected');
                        return;
                    }

                    if (!this.currentChat.messages) {
                        this.currentChat.messages = [];
                    }

                    if (this.messageText.trim() || this.selectedImages.length) {
                        if (this.messageText.trim()) {
                            const textMessage = {
                                id: Date.now(),
                                type: 'text',
                                content: this.messageText,
                                isSelf: true,
                                time: new Date().toLocaleTimeString()
                            };
                            this.currentChat.messages.push(textMessage);
                            // Êõ¥Êñ∞ÊúÄÂêé‰∏ÄÊù°ÊÅØ
                            this.currentChat.lastMessage = this.messageText;
                            this.currentChat.time = new Date().toLocaleTimeString();
                        }
                        
                        this.selectedImages.forEach((image, index) => {
                            const imageMessage = {
                                id: Date.now() + index + 1,
                                type: 'image',
                                content: image,
                                isSelf: true,
                                time: new Date().toLocaleTimeString()
                            };
                            this.currentChat.messages.push(imageMessage);
                            // Â¶ÇÊûúÊòØÊúÄÂêé‰∏ÄÂº†ÂõæÁâáÔºåÊõ¥Êñ∞ÊúÄÂêé‰∏ÄÊù°Ê∂àÊÅØ
                            if (index === this.selectedImages.length - 1) {
                                this.currentChat.lastMessage = '[ÂõæÁâá]';
                                this.currentChat.time = new Date().toLocaleTimeString();
                            }
                        });
                        
                        this.messageText = '';
                        this.selectedImages = [];
                        this.imageFiles = [];
                        
                        this.$nextTick(() => {
                            const chatContent = document.querySelector('.chat-content');
                            if (chatContent) {
                                chatContent.scrollTop = chatContent.scrollHeight;
                            }
                        });
                    }
                },
                openContactDetail(contact) {
                    this.currentContact = contact;
                    this.showContactDetail = true;
                },
                closeContactDetail() {
                    this.showContactDetail = false;
                    this.selectedContact = null;
                    // ËøîÂõûÂà∞ÂæÆ‰ø°Ê†áÁ≠æÈ°µ
                    this.activeTab = 'chats';
                },
                startChat(contact) {
                    this.closeContactDetail();
                    let chat = this.chats.find(c => c.id === contact.id);
                    if (!chat) {
                        chat = {
                            id: contact.id,
                            name: contact.name,
                            avatar: contact.avatar,
                            lastMessage: '',
                            time: new Date().toLocaleTimeString()
                        };
                        this.chats.unshift(chat);
                    }
                    this.openChat(chat);
                },
                scrollToLetter(letter) {
                    const element = document.querySelector(`[data-letter="${letter}"]`);
                    if (element) {
                        const container = document.querySelector('.contact-list');
                        const containerRect = container.getBoundingClientRect();
                        const elementRect = element.getBoundingClientRect();
                        const offset = elementRect.top - containerRect.top;
                        
                        container.scrollTo({
                            top: container.scrollTop + offset - 60, // ËÄÉËôëÈ°∂ÈÉ®Âõ∫ÂÆöÂå∫ÂüüÈ´òÂ∫¶
                            behavior: 'smooth'
                        });
                    }
                },
                handleLetterTouchStart(event, letter) {
                    event.preventDefault();
                    this.scrollToLetter(letter);
                },
                receiveMessage(chatId, message) {
                    const chat = this.chats.find(c => c.id === chatId);
                    if (chat) {
                        if (!chat.messages) {
                            chat.messages = [];
                        }
                        chat.messages.push(message);
                        chat.lastMessage = message.content;
                        chat.time = new Date().toLocaleTimeString();
                        
                        // Â¶ÇÊûú‰∏çÊòØÂΩìÂâçËÅäÂ§©ÔºåÂ¢ûÂä†Êú™ËØªÊ∂àÊÅØÊï∞
                        if (this.currentChat?.id !== chat.id) {
                            chat.unread = (chat.unread || 0) + 1;
                        }
                    }
                },
                // Â§ÑÁêÜÊêúÁ¥¢
                handleSearch() {
                    if (!this.searchText) {
                        this.searchResults = [];
                        return;
                    }
                    
                    this.searchResults = this.contactSections.reduce((results, section) => {
                        return results.concat(section.contacts.filter(contact => contact.name.toLowerCase().includes(this.searchText.toLowerCase())));
                    }, []);
                },
                openMoments() {
                    this.showMoments = true;
                    this.showChat = false;
                },
                
                closeMoments() {
                    this.showMoments = false;
                },
                
                openCamera() {
                    // ÂÆûÁé∞ÊãçÁÖßÂäüËÉΩ
                    console.log('ÊâìÂºÄÁõ∏Êú∫');
                },
                
                previewImage(images, index) {
                    // ÂÆûÁé∞ÂõæÁâáÈ¢ÑËßàÂäüËÉΩ
                    console.log('È¢ÑËßàÂõæÁâá', images[index]);
                },
                testClick() {
                    console.log('ÁÇπÂáª‰∫ÜÊúãÂèãÂúà');
                }
            },
            computed: {
                getCurrentTabName() {
                    const currentTab = this.tabs.find(tab => tab.id === this.currentTab);
                    return currentTab ? currentTab.name : '‰ø°';
                }
            }
        });

        app.mount('#app');
    </script>
</body>
</html> 